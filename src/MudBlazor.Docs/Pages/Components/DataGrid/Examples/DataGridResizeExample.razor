@using System.Net.Http.Json
@using MudBlazor.Examples.Data.Models
@namespace MudBlazor.Docs.Examples
@inject HttpClient httpClient

<MudDataGrid
    T="Element"
    Items="@Elements"
    ColumnResizeMode="@(_resizeColumn ? ResizeMode.Column : ResizeMode.Container)"
    Height="1000px"
    DragDropColumnReordering="true"

    FixedHeader="true"
    Virtualize="true">
    <Columns>
        <PropertyColumn
            Property="x => x.Number"
            StickyLeft="_sticky"
            Title="Nr">
        </PropertyColumn>
        <PropertyColumn
            Property="x => x.Sign"
            Resizable="false"/>
        <PropertyColumn
            Property="x => x.Name"/>
        <PropertyColumn
            MinWidth="300"
            Property="x => x.Position"/>
        <PropertyColumn
            Property="x => x.Molar"
            MaxWidth="400"
            Hideable="true"
            Title="Molar mass"
            CellStyle="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
            HeaderStyle="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"/>
        <PropertyColumn
            Property="x => x.Group"
            MaxWidth="400"
            MinWidth="3"
            Title="Category"/>
    </Columns>
</MudDataGrid>

<div
    class="d-flex flex-wrap mt-4">
    <div
        class="d-flex justify-start align-center">
        <p
            class="mud-typography mud-typography-body1 mud-inherit-text mr-2">
            ResizeMode.Container
        </p>
        <MudSwitch
            @bind-Value="_resizeColumn">
            ResizeMode.Column
        </MudSwitch>
    </div>
</div>
<div
    class="d-flex flex-wrap mt-4">
    <div
        class="d-flex justify-start align-center">
        <p
            class="mud-typography mud-typography-body1 mud-inherit-text mr-2">
            not sticky
        </p>
        <MudSwitch
            @bind-Value="_sticky">
            sticky
        </MudSwitch>
    </div>
</div>

@code {
    private IEnumerable<Element> Elements = new List<Element>();
    private bool _resizeColumn;
    private bool _sticky;

    protected override async Task OnInitializedAsync()
    {
        var elements = await httpClient.GetFromJsonAsync<List<Element>>("webapi/periodictable");
        elements.AddRange(elements);
        elements.AddRange(elements);
        elements.AddRange(elements);
        elements.AddRange(elements);
        Elements = elements;
    }

}